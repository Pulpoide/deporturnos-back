services:
  k6-stress:
    image: grafana/k6
    container_name: k6-stress-runner
    user: root
    volumes:
      - ./k6:/k6
    entrypoint: >
      sh -c "
        echo 'ðŸš€ Ejecutando Stress Test...' &&
        mkdir -p /k6/reports/stress/json &&
        k6 run /k6/scripts/stress.js --out json=/k6/reports/stress/json/results.json &&
        echo 'âœ… JSON Reporte generado en /k6/reports/stress/json/results.json'
      "
    environment:
      - BASE_URL=http://app:8080
    networks:
      - deporturnos-back_default

  k6-spike:
    image: grafana/k6
    container_name: k6-spike-runner
    user: root
    volumes:
      - ./k6:/k6
    entrypoint: >
      sh -c "
        echo 'ðŸš€ Ejecutando Spike Test...' &&
        mkdir -p /k6/reports/spike/json &&
        k6 run /k6/scripts/spike.js --out json=/k6/reports/spike/json/results.json &&
        echo 'âœ… JSON Reporte generado en /k6/reports/spike/json/results.json'
      "
    environment:
      - BASE_URL=http://app:8080
    networks:
      - deporturnos-back_default

networks:
  deporturnos-back_default:
    external: true